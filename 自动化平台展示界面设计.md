## **自动化平台展示界面设计**
---
### **首界面大屏**
#### 一、关键指标
+ **当前统计信息（主）**    
> *项目总数* *在线仪器总数* *今日测量次数* *今日采集数据条数*    
+ **各项指标分析统计（次）**   
> *项目个数分类统计* *城市分布占比统计* *仪器分类统计* *数据量分类对比统计*
+ **动态信息（次）**
> *工控机上下线* *定时采集指令下达*

#### 二、各模块设计
#### 1. 数据统计模块    

+ **项目个数统计**： 按照*仪器类型/监测类型*和*当前状态*进行分类统计  
可考虑采用 [echarts堆叠条形图](https://www.echartsjs.com/examples/zh/editor.html?c=bar-y-category-stack) 来显示    

  ![echarts堆叠条形图](https://images.gitee.com/uploads/images/2019/0930/105056_fa4af133_1001582.png "屏幕截图.png")

  >仪器类型：测距仪、倾角计、全站仪、静力水准、电水平尺、裂缝计、温度计    
  当前状态：在线、不在线

+ **城市分布统计**： 统计每个城市项目的个数   
可考虑采用 echarts pie-doughnut或者玫瑰图来显示    
![echarts甜甜圈图](https://images.gitee.com/uploads/images/2019/1012/094205_f74f9fb5_1001582.png "屏幕截图.png")
![echarts玫瑰图](https://images.gitee.com/uploads/images/2019/1012/094052_2486e940_1001582.png "屏幕截图.png")

+ **工控机个数统计**： 按照*当前状态*进行分类统计    
考虑与工控机的动态推送一起显示，因为只有两类数据，所以单独不好显示

+ **仪器个数统计**： 统计正在使用或者量测中心各类仪器个数   
考虑象形柱状图，需自定义各类仪器的ICON，可参考[echarts象形柱状图](https://www.echartsjs.com/examples/zh/editor.html?c=pictorialBar-velocity)    

   ![echarts象形柱状图](https://images.gitee.com/uploads/images/2019/0930/104947_4f9ea6f4_1001582.png "屏幕截图.png")

+ **当前状态统计**：*当前在线仪器总数*、*今日测量总次数*、*目前总共测点个数* 等   
考虑集中放在一个位置（如正上方）实时更新显示，突出显示数字

+ **数据量的统计**：按照不同统计方式来统计数据条数
   + 按照不同测项，统计日、月、年平均数据条数   
   由于日月年数据量相差很大，所以考虑（1）三个饼图（不同测项所占百分比）+总数的显示，存在问题测项的占比三个图几乎无差别（2）只统计某一个如日均/月均/年均，采用柱状图+饼图（不同测项所占百分比）显示，[echarts-barChart1](https://www.echartsjs.com/examples/zh/editor.html?c=watermark)    

   ![echarts-barChart1](https://images.gitee.com/uploads/images/2019/0930/105235_713e0b18_1001582.png "屏幕截图.png")    

   + 按照不同测项，统计年累计数据量变化   
   考虑动态显示柱状图+饼图，可参考 [echarts-barChart2](https://www.echartsjs.com/examples/zh/editor.html?c=mix-timeline-finance)    

   ![echarts-barChart2](https://images.gitee.com/uploads/images/2019/0930/105346_24fbd949_1001582.png "屏幕截图.png")   


+ **关键词云图**：按照*城市*、*线路*、*项目名称* 等制作高频词汇，动态显示（待定）      
可考虑采用 [echarts词云图](https://github.com/ecomfe/echarts-wordcloud) 来显示   
需要制定高频词汇的筛选规则以及更新规则


#### 2. 动态推送模块

+ 工控机上线、下线动态推送    
考虑滚动显示在线的工控机（工控机id+绑定的仪器/项目），以及工控机上线、下线通知

+ 测量计划动态推送   
参考现有自动化平台测量计划推送模块

#### 3. 自动化测量示意模块（待定）
+ 做一个简单的动画，用来示意整个自动化的测量流程   
考虑展示一个很简单的动态示意图，从传感器到工控机....最后到网站前台，显示从测量指令下达到数据传回的整个过程。

#### 三、设计参考

1. 主要指标放在中心，占据较大篇幅显示；其他分部在周围。    
在屏幕中间放项目位置图，底图采用百度darknight theme的地图，项目marker采用**单色**动态的圆点显示（参考[云图大屏展示](https://board.ce-safe.com/)），将主要的信息指标以半透明的背景显示在地图上。或者找一个与隧道自动化相关的2.5D图，作为背景，具体参考下面大屏demo。  
![云图大屏地图显示](https://images.gitee.com/uploads/images/2019/1012/104948_179b1f58_1001582.png "屏幕截图.png")   
  ![大屏显示1](https://images.gitee.com/uploads/images/2019/1012/103416_0e11e4a7_1001582.png "屏幕截图.png")
2. 所有的模块按照模块合理放置，无主次之分。      
具体参考[keen themes](https://keenthemes.com/keen/preview/demo1/)
  ![keen themes demo1](https://images.gitee.com/uploads/images/2019/1012/105727_7eb9e133_1001582.png "屏幕截图.png")    

#### 四、存在问题    
+ 暂时只根据现有的数据考虑统计和展示，并未考虑报警相关的模块。
+ 内容较少，页面不够丰富。
+ 指标抽取不全面，分析维度不正确。

---
### **项目界面**

#### 一、关键指标
> *项目基本信息* *自动化监测变形曲线* *监测变形统计表* *监测位置图* *实时测量*

#### 二、各模块设计
#### 1. 基本信息
> 所在城市　|　线路　|　监测类型　|　传感器（各类传感器个数）　|　仪器状态　|　项目测站　|　测点数量　|　测量计划（当前测量次数/总计划测量次数 每天）      

+ （1）考虑采用普通的栅格或者table显示；
+ （2）考虑根据不同指标个性化显示，例如传感器个数统计用饼图，测量计划可以选用进度条等，多形式表达可以丰富界面。   

  注意：一个项目有多个测项，*测站*和*测量计划*需要区分显示。

#### 2. 变形曲线
+ 各测项的变形曲线   
按照*测项*和*位置*平铺展示变形曲线，允许scroll。     
考虑采用K线图，图中信息（曲线：累计变化量，delta：某个时间段的阶段变化量，顶线：本次变化量）

#### 3. 变形统计表
+ 各测项的变形统计数据
按照*测项*和*位置*显示
当前位置该测项的*本次变形*最大点的*变形量*和*变形速率*；以及*累计变形*最大点的*变形量*和*变形速率*。

#### 4. 布点图
+ （1）考虑采用较小的篇幅（1/4-1/3）去展示布点图（原来leaflet形式）。   
+ （2）考虑采用pdf或者jpg，由于现阶段制作布点图流程繁琐，很多项目无布点图，所以采用PDF或jpg形式只显示简单的平面示意图，包括主要测量位置、必要的周边环境说明等。

#### 5. 实时测量
> 测量指令(开始、暂停)　|　当前工控机在线状况　|　项目是否可以操作　|　当前测点激活测点数/总数

+ （1）考虑类似之前实时测量小窗口展示，并在开始测量时，联动布点图一起显示（如无布点图，该功能可以去掉）。同时在执行测量计划时，也动态显示测点值。   

  问题：一个项目存在多个测项，实时指令的下达，需要选择测项，考虑采用Tab进行切换。  
![实时测量模块](https://images.gitee.com/uploads/images/2019/1012/144105_4e802425_1001582.png "屏幕截图.png")

#### 6. 其他功能
  因为该设计稿只是针对项目的大屏展示用进行的设计，并未考虑用户交互操作，所以需要提供进入*项目前台*、*项目配置*、*首页*和*项目列表*等链接，以方便用户对项目的其他操作。

#### 三、初步布局设计
设计初稿
![设计初稿1](https://images.gitee.com/uploads/images/2019/1012/150103_f768a9f8_1001582.png "屏幕截图.png")
![设计初稿2](https://images.gitee.com/uploads/images/2019/1014/134618_b78ca76e_1001582.png "屏幕截图.png")

#### 四、存在问题
+ 每个项目的测项和监测位置数量不一，在变形曲线和变形统计表的排版上不好控制。   
需要考虑测项和监测位置的特殊情况（比如只有一个测项和一个监测位置时变形曲线和统计表会看起来比较稀疏）。
+ 布点图   
有项目无布点图，布局应该怎么考虑，用默认的图显示？还是提供其他布局排版。
